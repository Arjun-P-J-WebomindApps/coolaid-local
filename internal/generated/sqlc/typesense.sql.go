// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: typesense.sql

package sqlc

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
)

const getProductTableMetaData = `-- name: GetProductTableMetaData :many
SELECT 
    pp.id,
    co.name AS company,
    m.name AS model,
    b.name AS brand,
    c.name AS category,
    pp.part_no
FROM product_parts pp
    JOIN companies co on co.id=pp.company_id
    JOIN models m on m.id = pp.model_id
    LEFT JOIN model_variants mv ON mv.part_no=pp.part_no
    JOIN brands b ON b.id = pp.brand_id
    JOIN categories c ON c.id =  pp.category_id
`

type GetProductTableMetaDataRow struct {
	ID       uuid.UUID
	Company  string
	Model    string
	Brand    string
	Category string
	PartNo   string
}

func (q *Queries) GetProductTableMetaData(ctx context.Context) ([]GetProductTableMetaDataRow, error) {
	rows, err := q.db.QueryContext(ctx, getProductTableMetaData)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetProductTableMetaDataRow
	for rows.Next() {
		var i GetProductTableMetaDataRow
		if err := rows.Scan(
			&i.ID,
			&i.Company,
			&i.Model,
			&i.Brand,
			&i.Category,
			&i.PartNo,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getTypesenseData = `-- name: GetTypesenseData :many
SELECT 
    p.id                       AS id,        -- Typesense primary key (or use part_no if you prefer)
    b.name                     AS brand,
    cat.name                   AS category,
    c.name                     AS company,
    COALESCE(mv.gen, '')       AS gen,
    'none'                     AS fuel_type, -- use single quotes, not "
    m.name                     AS model,
    p.part_no                  AS part_no
FROM product_parts p
LEFT JOIN companies  c   ON p.company_id  = c.id
LEFT JOIN models     m   ON p.model_id    = m.id
LEFT JOIN brands     b   ON p.brand_id    = b.id
LEFT JOIN categories cat ON p.category_id = cat.id
LEFT JOIN model_variants mv ON mv.part_no = p.part_no
`

type GetTypesenseDataRow struct {
	ID       uuid.UUID
	Brand    sql.NullString
	Category sql.NullString
	Company  sql.NullString
	Gen      string
	FuelType string
	Model    sql.NullString
	PartNo   string
}

func (q *Queries) GetTypesenseData(ctx context.Context) ([]GetTypesenseDataRow, error) {
	rows, err := q.db.QueryContext(ctx, getTypesenseData)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetTypesenseDataRow
	for rows.Next() {
		var i GetTypesenseDataRow
		if err := rows.Scan(
			&i.ID,
			&i.Brand,
			&i.Category,
			&i.Company,
			&i.Gen,
			&i.FuelType,
			&i.Model,
			&i.PartNo,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
