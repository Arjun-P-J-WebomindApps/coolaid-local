// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: oem_listing.sql

package sqlc

import (
	"context"
	"database/sql"

	"github.com/google/uuid"
	"github.com/lib/pq"
)

const createOemListing = `-- name: CreateOemListing :one
INSERT INTO oem_listings (
  part_no,
  oem_number,
  price
) VALUES (
  $1, $2, $3
)
RETURNING id, part_no, oem_number, price, created_at, updated_at
`

type CreateOemListingParams struct {
	PartNo    string
	OemNumber string
	Price     float64
}

// Optional: if you also want server-generated UUIDs (no ID passed from app)
func (q *Queries) CreateOemListing(ctx context.Context, arg CreateOemListingParams) (OemListing, error) {
	row := q.db.QueryRowContext(ctx, createOemListing, arg.PartNo, arg.OemNumber, arg.Price)
	var i OemListing
	err := row.Scan(
		&i.ID,
		&i.PartNo,
		&i.OemNumber,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const createOemListingWithID = `-- name: CreateOemListingWithID :one

INSERT INTO oem_listings (
  id,
  part_no,
  oem_number,
  price
) VALUES (
  $1, $2, $3, $4
)
RETURNING id, part_no, oem_number, price, created_at, updated_at
`

type CreateOemListingWithIDParams struct {
	ID        uuid.UUID
	PartNo    string
	OemNumber string
	Price     float64
}

// -------------------------------------------------------------------------------------------------------------------------------
// MUTATION
// -------------------------------------------------------------------------------------------------------------------------------
func (q *Queries) CreateOemListingWithID(ctx context.Context, arg CreateOemListingWithIDParams) (OemListing, error) {
	row := q.db.QueryRowContext(ctx, createOemListingWithID,
		arg.ID,
		arg.PartNo,
		arg.OemNumber,
		arg.Price,
	)
	var i OemListing
	err := row.Scan(
		&i.ID,
		&i.PartNo,
		&i.OemNumber,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteOemListingByID = `-- name: DeleteOemListingByID :exec
DELETE FROM oem_listings
WHERE id = $1
`

func (q *Queries) DeleteOemListingByID(ctx context.Context, id uuid.UUID) error {
	_, err := q.db.ExecContext(ctx, deleteOemListingByID, id)
	return err
}

const deleteOemListingsByOemNumber = `-- name: DeleteOemListingsByOemNumber :exec
DELETE FROM oem_listings
WHERE oem_number = $1
`

// Optional: delete by OEM number
func (q *Queries) DeleteOemListingsByOemNumber(ctx context.Context, oemNumber string) error {
	_, err := q.db.ExecContext(ctx, deleteOemListingsByOemNumber, oemNumber)
	return err
}

const deleteOemListingsByPartNo = `-- name: DeleteOemListingsByPartNo :exec
DELETE FROM oem_listings
WHERE part_no = $1
`

func (q *Queries) DeleteOemListingsByPartNo(ctx context.Context, partNo string) error {
	_, err := q.db.ExecContext(ctx, deleteOemListingsByPartNo, partNo)
	return err
}

const getOemListingById = `-- name: GetOemListingById :one

SELECT id, part_no, oem_number, price, created_at, updated_at
FROM oem_listings
WHERE id = $1
`

// -------------------------------------------------------------------------------------------------------------------------------
// QUERY
// -------------------------------------------------------------------------------------------------------------------------------
func (q *Queries) GetOemListingById(ctx context.Context, id uuid.UUID) (OemListing, error) {
	row := q.db.QueryRowContext(ctx, getOemListingById, id)
	var i OemListing
	err := row.Scan(
		&i.ID,
		&i.PartNo,
		&i.OemNumber,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOemListingByPartAndOemNumber = `-- name: GetOemListingByPartAndOemNumber :one
SELECT id, part_no, oem_number, price, created_at, updated_at
FROM oem_listings
WHERE part_no = $1
  AND oem_number = $2
`

type GetOemListingByPartAndOemNumberParams struct {
	PartNo    string
	OemNumber string
}

func (q *Queries) GetOemListingByPartAndOemNumber(ctx context.Context, arg GetOemListingByPartAndOemNumberParams) (OemListing, error) {
	row := q.db.QueryRowContext(ctx, getOemListingByPartAndOemNumber, arg.PartNo, arg.OemNumber)
	var i OemListing
	err := row.Scan(
		&i.ID,
		&i.PartNo,
		&i.OemNumber,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getOemListingsByIds = `-- name: GetOemListingsByIds :many
SELECT
  id,
  part_no,
  oem_number,
  price,
  created_at,
  updated_at
FROM oem_listings
WHERE id = ANY($1::uuid[])
`

func (q *Queries) GetOemListingsByIds(ctx context.Context, dollar_1 []uuid.UUID) ([]OemListing, error) {
	rows, err := q.db.QueryContext(ctx, getOemListingsByIds, pq.Array(dollar_1))
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []OemListing
	for rows.Next() {
		var i OemListing
		if err := rows.Scan(
			&i.ID,
			&i.PartNo,
			&i.OemNumber,
			&i.Price,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getOemListingsByOemNumber = `-- name: GetOemListingsByOemNumber :many
SELECT id, part_no, oem_number, price, created_at, updated_at
FROM oem_listings
WHERE oem_number = $1
ORDER BY part_no ASC
`

func (q *Queries) GetOemListingsByOemNumber(ctx context.Context, oemNumber string) ([]OemListing, error) {
	rows, err := q.db.QueryContext(ctx, getOemListingsByOemNumber, oemNumber)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []OemListing
	for rows.Next() {
		var i OemListing
		if err := rows.Scan(
			&i.ID,
			&i.PartNo,
			&i.OemNumber,
			&i.Price,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getOemListingsByPartNo = `-- name: GetOemListingsByPartNo :many
SELECT id, part_no, oem_number, price, created_at, updated_at
FROM oem_listings
WHERE part_no = $1
ORDER BY oem_number ASC
`

func (q *Queries) GetOemListingsByPartNo(ctx context.Context, partNo string) ([]OemListing, error) {
	rows, err := q.db.QueryContext(ctx, getOemListingsByPartNo, partNo)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []OemListing
	for rows.Next() {
		var i OemListing
		if err := rows.Scan(
			&i.ID,
			&i.PartNo,
			&i.OemNumber,
			&i.Price,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const searchOemNumbersByPartialMatch = `-- name: SearchOemNumbersByPartialMatch :many
select id, part_no, oem_number, price, created_at, updated_at from oem_listings o WHERE
o.oem_number  ILIKE '%' || $1 || '%'
ORDER BY o.oem_number 
LIMIT 15
`

func (q *Queries) SearchOemNumbersByPartialMatch(ctx context.Context, dollar_1 sql.NullString) ([]OemListing, error) {
	rows, err := q.db.QueryContext(ctx, searchOemNumbersByPartialMatch, dollar_1)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []OemListing
	for rows.Next() {
		var i OemListing
		if err := rows.Scan(
			&i.ID,
			&i.PartNo,
			&i.OemNumber,
			&i.Price,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateOemListingByID = `-- name: UpdateOemListingByID :one
UPDATE oem_listings AS o
SET
  part_no    = COALESCE($1,    o.part_no),
  oem_number = COALESCE($2, o.oem_number),
  price      = COALESCE($3,      o.price),
  updated_at = now()
WHERE o.id = $4
RETURNING id, part_no, oem_number, price, created_at, updated_at
`

type UpdateOemListingByIDParams struct {
	PartNo    sql.NullString
	OemNumber sql.NullString
	Price     sql.NullFloat64
	ID        uuid.UUID
}

func (q *Queries) UpdateOemListingByID(ctx context.Context, arg UpdateOemListingByIDParams) (OemListing, error) {
	row := q.db.QueryRowContext(ctx, updateOemListingByID,
		arg.PartNo,
		arg.OemNumber,
		arg.Price,
		arg.ID,
	)
	var i OemListing
	err := row.Scan(
		&i.ID,
		&i.PartNo,
		&i.OemNumber,
		&i.Price,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
