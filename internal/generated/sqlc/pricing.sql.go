// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: pricing.sql

package sqlc

import (
	"context"
	"database/sql"
	"time"

	"github.com/google/uuid"
	"github.com/lib/pq"
)

const bulkUpdatePricingSelective = `-- name: BulkUpdatePricingSelective :exec
WITH data AS (
  SELECT
    UNNEST($1::text[]) AS part_no,

    UNNEST($2::numeric[]) AS basic_price,
    UNNEST($3::numeric[]) AS freight,
    UNNEST($4::numeric[]) AS gst,
    UNNEST($5::numeric[]) AS tax,

    UNNEST($6::numeric[]) AS ac_workshop,
    UNNEST($7::numeric[]) AS ac_workshop_per,
    UNNEST($8::numeric[]) AS ac_workshop_amt,

    UNNEST($9::numeric[]) AS multibrand_workshop,
    UNNEST($10::numeric[]) AS multibrand_workshop_per,
    UNNEST($11::numeric[]) AS multibrand_workshop_amt,

    UNNEST($12::numeric[]) AS auto_trader,
    UNNEST($13::numeric[]) AS auto_trader_per,
    UNNEST($14::numeric[]) AS auto_trader_amt,

    UNNEST($15::numeric[]) AS ac_trader,
    UNNEST($16::numeric[]) AS ac_trader_per,
    UNNEST($17::numeric[]) AS ac_trader_amt,

    UNNEST($18::numeric[]) AS outstation_class_a,
    UNNEST($19::text[]) AS outstation_note,

    UNNEST($20::numeric[]) AS mrp_temp,
    UNNEST($21::numeric[]) AS oem_mrp,
    UNNEST($22::text[]) AS unit_measure,
    UNNEST($23::int4[]) AS minimum_purchase_quantity
)
UPDATE product_part_pricing p
SET
  basic_price = COALESCE(NULLIF(d.basic_price, -1), p.basic_price),
  freight = COALESCE(NULLIF(d.freight, -1), p.freight),
  gst = COALESCE(NULLIF(d.gst, -1), p.gst),
  tax = COALESCE(NULLIF(d.tax, -1), p.tax),

  ac_workshop = COALESCE(NULLIF(d.ac_workshop, -1), p.ac_workshop),
  ac_workshop_per = COALESCE(NULLIF(d.ac_workshop_per, -1), p.ac_workshop_per),
  ac_workshop_amt = COALESCE(NULLIF(d.ac_workshop_amt, -1), p.ac_workshop_amt),

  multibrand_workshop = COALESCE(NULLIF(d.multibrand_workshop, -1), p.multibrand_workshop),
  multibrand_workshop_per = COALESCE(NULLIF(d.multibrand_workshop_per, -1), p.multibrand_workshop_per),
  multibrand_workshop_amt = COALESCE(NULLIF(d.multibrand_workshop_amt, -1), p.multibrand_workshop_amt),

  auto_trader = COALESCE(NULLIF(d.auto_trader, -1), p.auto_trader),
  auto_trader_per = COALESCE(NULLIF(d.auto_trader_per, -1), p.auto_trader_per),
  auto_trader_amt = COALESCE(NULLIF(d.auto_trader_amt, -1), p.auto_trader_amt),

  ac_trader = COALESCE(NULLIF(d.ac_trader, -1), p.ac_trader),
  ac_trader_per = COALESCE(NULLIF(d.ac_trader_per, -1), p.ac_trader_per),
  ac_trader_amt = COALESCE(NULLIF(d.ac_trader_amt, -1), p.ac_trader_amt),

  outstation_class_a = COALESCE(NULLIF(d.outstation_class_a, -1), p.outstation_class_a),
  outstation_note = COALESCE(NULLIF(d.outstation_note, ''), p.outstation_note),

  mrp_temp = COALESCE(NULLIF(d.mrp_temp, -1), p.mrp_temp),
  oem_mrp = COALESCE(NULLIF(d.oem_mrp, -1), p.oem_mrp),
  unit_measure = COALESCE(NULLIF(d.unit_measure, ''), p.unit_measure),
  minimum_purchase_quantity = COALESCE(NULLIF(d.minimum_purchase_quantity, -1), p.minimum_purchase_quantity),

  updated_at = NOW()
FROM data d
JOIN product_parts pp ON pp.part_no = d.part_no
WHERE p.product_part_id = pp.id
`

type BulkUpdatePricingSelectiveParams struct {
	PartNos                []string
	BasicPrices            []float64
	Freights               []float64
	GstVals                []float64
	TaxVals                []float64
	AcWorkshops            []float64
	AcWorkshopPers         []float64
	AcWorkshopAmts         []float64
	MultibrandWorkshops    []float64
	MultibrandWorkshopPers []float64
	MultibrandWorkshopAmts []float64
	AutoTraders            []float64
	AutoTraderPers         []float64
	AutoTraderAmts         []float64
	AcTraders              []float64
	AcTraderPers           []float64
	AcTraderAmts           []float64
	OutstationClassAs      []float64
	OutstationNotes        []string
	MrpTemps               []float64
	OemMrps                []float64
	UnitMeasures           []string
	MinPurchaseQtys        []int32
}

func (q *Queries) BulkUpdatePricingSelective(ctx context.Context, arg BulkUpdatePricingSelectiveParams) error {
	_, err := q.db.ExecContext(ctx, bulkUpdatePricingSelective,
		pq.Array(arg.PartNos),
		pq.Array(arg.BasicPrices),
		pq.Array(arg.Freights),
		pq.Array(arg.GstVals),
		pq.Array(arg.TaxVals),
		pq.Array(arg.AcWorkshops),
		pq.Array(arg.AcWorkshopPers),
		pq.Array(arg.AcWorkshopAmts),
		pq.Array(arg.MultibrandWorkshops),
		pq.Array(arg.MultibrandWorkshopPers),
		pq.Array(arg.MultibrandWorkshopAmts),
		pq.Array(arg.AutoTraders),
		pq.Array(arg.AutoTraderPers),
		pq.Array(arg.AutoTraderAmts),
		pq.Array(arg.AcTraders),
		pq.Array(arg.AcTraderPers),
		pq.Array(arg.AcTraderAmts),
		pq.Array(arg.OutstationClassAs),
		pq.Array(arg.OutstationNotes),
		pq.Array(arg.MrpTemps),
		pq.Array(arg.OemMrps),
		pq.Array(arg.UnitMeasures),
		pq.Array(arg.MinPurchaseQtys),
	)
	return err
}

const createProductPrice = `-- name: CreateProductPrice :one

INSERT INTO product_part_pricing (
  id,
  product_part_id,
  basic_price,
  freight,
  gst,
  tax,

  -- Ac Workshop
  ac_workshop,
  ac_workshop_per,
  ac_workshop_amt,

  -- Multibrand Workshop
  multibrand_workshop,
  multibrand_workshop_per,
  multibrand_workshop_amt,

  -- Auto Trader
  auto_trader,
  auto_trader_per,
  auto_trader_amt,

  -- AC Trader
  ac_trader,
  ac_trader_per,
  ac_trader_amt,

  -- Outstation
  outstation_class_a,
  outstation_note,

  -- MRPs and misc
  mrp_temp,
  oem_mrp,
  unit_measure,
  minimum_purchase_quantity,

  created_at,
  updated_at
)
VALUES (
    $1,  -- id
    $2,  -- product_part_id
    $3,  -- basic_price
    $4,  -- freight
    $5,  -- gst
    $6,  -- tax

    $7,  -- ac_workshop
    $8,  -- ac_workshop_per
    $9,  -- ac_workshop_amt

    $10, -- multibrand_workshop
    $11, -- multibrand_workshop_per
    $12, -- multibrand_workshop_amt

    $13, -- auto_trader
    $14, -- auto_trader_per
    $15, -- auto_trader_amt

    $16, -- ac_trader
    $17, -- ac_trader_per
    $18, -- ac_trader_amt

    $19, -- outstation_class_a
    $20, -- outstation_note

    $21, -- mrp_temp
    $22, -- oem_mrp
    $23, -- unit_measure
    $24, -- minimum_purchase_quantity

    $25, -- created_at
    $26  -- updated_at
)
RETURNING id, product_part_id, basic_price, freight, gst, tax, ac_workshop, ac_workshop_per, ac_workshop_amt, multibrand_workshop, multibrand_workshop_per, multibrand_workshop_amt, auto_trader, auto_trader_per, auto_trader_amt, ac_trader, ac_trader_per, ac_trader_amt, outstation_class_a, outstation_note, minimum_purchase_quantity, mrp_temp, oem_mrp, unit_measure, created_at, updated_at
`

type CreateProductPriceParams struct {
	ID                      uuid.UUID
	ProductPartID           uuid.UUID
	BasicPrice              float64
	Freight                 float64
	Gst                     float64
	Tax                     float64
	AcWorkshop              float64
	AcWorkshopPer           float64
	AcWorkshopAmt           float64
	MultibrandWorkshop      float64
	MultibrandWorkshopPer   float64
	MultibrandWorkshopAmt   float64
	AutoTrader              float64
	AutoTraderPer           float64
	AutoTraderAmt           float64
	AcTrader                float64
	AcTraderPer             float64
	AcTraderAmt             float64
	OutstationClassA        float64
	OutstationNote          sql.NullString
	MrpTemp                 float64
	OemMrp                  float64
	UnitMeasure             sql.NullString
	MinimumPurchaseQuantity int32
	CreatedAt               time.Time
	UpdatedAt               time.Time
}

// ---------------------------------------------------------------------------------------------------------------------------
// Mutation
// ---------------------------------------------------------------------------------------------------------------------------
func (q *Queries) CreateProductPrice(ctx context.Context, arg CreateProductPriceParams) (ProductPartPricing, error) {
	row := q.db.QueryRowContext(ctx, createProductPrice,
		arg.ID,
		arg.ProductPartID,
		arg.BasicPrice,
		arg.Freight,
		arg.Gst,
		arg.Tax,
		arg.AcWorkshop,
		arg.AcWorkshopPer,
		arg.AcWorkshopAmt,
		arg.MultibrandWorkshop,
		arg.MultibrandWorkshopPer,
		arg.MultibrandWorkshopAmt,
		arg.AutoTrader,
		arg.AutoTraderPer,
		arg.AutoTraderAmt,
		arg.AcTrader,
		arg.AcTraderPer,
		arg.AcTraderAmt,
		arg.OutstationClassA,
		arg.OutstationNote,
		arg.MrpTemp,
		arg.OemMrp,
		arg.UnitMeasure,
		arg.MinimumPurchaseQuantity,
		arg.CreatedAt,
		arg.UpdatedAt,
	)
	var i ProductPartPricing
	err := row.Scan(
		&i.ID,
		&i.ProductPartID,
		&i.BasicPrice,
		&i.Freight,
		&i.Gst,
		&i.Tax,
		&i.AcWorkshop,
		&i.AcWorkshopPer,
		&i.AcWorkshopAmt,
		&i.MultibrandWorkshop,
		&i.MultibrandWorkshopPer,
		&i.MultibrandWorkshopAmt,
		&i.AutoTrader,
		&i.AutoTraderPer,
		&i.AutoTraderAmt,
		&i.AcTrader,
		&i.AcTraderPer,
		&i.AcTraderAmt,
		&i.OutstationClassA,
		&i.OutstationNote,
		&i.MinimumPurchaseQuantity,
		&i.MrpTemp,
		&i.OemMrp,
		&i.UnitMeasure,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const deleteProductPriceByID = `-- name: DeleteProductPriceByID :exec
DELETE FROM product_part_pricing
WHERE id = $1
`

func (q *Queries) DeleteProductPriceByID(ctx context.Context, id uuid.UUID) error {
	_, err := q.db.ExecContext(ctx, deleteProductPriceByID, id)
	return err
}

const deleteProductPriceByProductPartID = `-- name: DeleteProductPriceByProductPartID :exec
DELETE FROM product_part_pricing
WHERE product_part_id = $1
`

func (q *Queries) DeleteProductPriceByProductPartID(ctx context.Context, productPartID uuid.UUID) error {
	_, err := q.db.ExecContext(ctx, deleteProductPriceByProductPartID, productPartID)
	return err
}

const getProductPricingDownloadDetails = `-- name: GetProductPricingDownloadDetails :many
SELECT 
  pp.part_no AS "Part No",
  c.name AS "Company",
  m.name AS "Model",
  b.name AS "Brand",
  cat.name AS "Category",

  -- Pricing info
  price.basic_price AS "Basic Price",
  price.freight AS "Freight",
  price.gst AS "GST",

  price.ac_workshop AS "Ac Workshop",
  price.ac_workshop_per AS "Ac Workshop Per",
  price.ac_workshop_amt AS "Ac Workshop Margin",

  price.multibrand_workshop AS "Multibrand Workshop",
  price.multibrand_workshop_per AS "Multibrand Workshop Per",
  price.multibrand_workshop_amt AS "Multibrand Workshop Margin",

  price.auto_trader AS "Auto Trader",
  price.auto_trader_per AS "Auto Trader Per",
  price.auto_trader_amt AS "Auto Trader Margin",

  price.ac_trader AS "Ac Trader",
  price.ac_trader_per AS "Ac Trader Per",
  price.ac_trader_amt AS "Ac Trader Margin",

  price.minimum_purchase_quantity AS "Minimum Purchase Quantity",
  price.oem_mrp AS "OEM MRP",
  price.unit_measure AS "Unit Measure",

  vnt.vendor_id AS "Vendor ID"

FROM product_part_pricing price
LEFT JOIN product_parts pp ON pp.id = price.product_part_id
JOIN companies c ON c.id = pp.company_id
JOIN models m ON m.id = pp.model_id
JOIN brands b ON b.id = pp.brand_id
JOIN categories cat ON cat.id = pp.category_id
JOIN model_variants vnt ON vnt.part_no=pp.part_no
`

type GetProductPricingDownloadDetailsRow struct {
	PartNo                   sql.NullString
	Company                  string
	Model                    string
	Brand                    string
	Category                 string
	BasicPrice               float64
	Freight                  float64
	GST                      float64
	AcWorkshop               float64
	AcWorkshopPer            float64
	AcWorkshopMargin         float64
	MultibrandWorkshop       float64
	MultibrandWorkshopPer    float64
	MultibrandWorkshopMargin float64
	AutoTrader               float64
	AutoTraderPer            float64
	AutoTraderMargin         float64
	AcTrader                 float64
	AcTraderPer              float64
	AcTraderMargin           float64
	MinimumPurchaseQuantity  int32
	OEMMRP                   float64
	UnitMeasure              sql.NullString
	VendorID                 []string
}

func (q *Queries) GetProductPricingDownloadDetails(ctx context.Context) ([]GetProductPricingDownloadDetailsRow, error) {
	rows, err := q.db.QueryContext(ctx, getProductPricingDownloadDetails)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetProductPricingDownloadDetailsRow
	for rows.Next() {
		var i GetProductPricingDownloadDetailsRow
		if err := rows.Scan(
			&i.PartNo,
			&i.Company,
			&i.Model,
			&i.Brand,
			&i.Category,
			&i.BasicPrice,
			&i.Freight,
			&i.GST,
			&i.AcWorkshop,
			&i.AcWorkshopPer,
			&i.AcWorkshopMargin,
			&i.MultibrandWorkshop,
			&i.MultibrandWorkshopPer,
			&i.MultibrandWorkshopMargin,
			&i.AutoTrader,
			&i.AutoTraderPer,
			&i.AutoTraderMargin,
			&i.AcTrader,
			&i.AcTraderPer,
			&i.AcTraderMargin,
			&i.MinimumPurchaseQuantity,
			&i.OEMMRP,
			&i.UnitMeasure,
			pq.Array(&i.VendorID),
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getProductPricingFromProductId = `-- name: GetProductPricingFromProductId :one

SELECT id, product_part_id, basic_price, freight, gst, tax, ac_workshop, ac_workshop_per, ac_workshop_amt, multibrand_workshop, multibrand_workshop_per, multibrand_workshop_amt, auto_trader, auto_trader_per, auto_trader_amt, ac_trader, ac_trader_per, ac_trader_amt, outstation_class_a, outstation_note, minimum_purchase_quantity, mrp_temp, oem_mrp, unit_measure, created_at, updated_at
FROM product_part_pricing
WHERE product_part_id=$1
`

// ----------------------------------------------------------------------------------------------------------------------------------
// Query
// ----------------------------------------------------------------------------------------------------------------------------------
func (q *Queries) GetProductPricingFromProductId(ctx context.Context, productPartID uuid.UUID) (ProductPartPricing, error) {
	row := q.db.QueryRowContext(ctx, getProductPricingFromProductId, productPartID)
	var i ProductPartPricing
	err := row.Scan(
		&i.ID,
		&i.ProductPartID,
		&i.BasicPrice,
		&i.Freight,
		&i.Gst,
		&i.Tax,
		&i.AcWorkshop,
		&i.AcWorkshopPer,
		&i.AcWorkshopAmt,
		&i.MultibrandWorkshop,
		&i.MultibrandWorkshopPer,
		&i.MultibrandWorkshopAmt,
		&i.AutoTrader,
		&i.AutoTraderPer,
		&i.AutoTraderAmt,
		&i.AcTrader,
		&i.AcTraderPer,
		&i.AcTraderAmt,
		&i.OutstationClassA,
		&i.OutstationNote,
		&i.MinimumPurchaseQuantity,
		&i.MrpTemp,
		&i.OemMrp,
		&i.UnitMeasure,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateProductPriceByID = `-- name: UpdateProductPriceByID :one
UPDATE product_part_pricing AS p
SET
  basic_price             = COALESCE($1, p.basic_price),
  freight                 = COALESCE($2, p.freight),
  gst                     = COALESCE($3, p.gst),
  tax                     = COALESCE($4, p.tax),

  -- Ac Workshop (formerly retail)
  ac_workshop             = COALESCE($5, p.ac_workshop),
  ac_workshop_per         = COALESCE($6, p.ac_workshop_per),
  ac_workshop_amt         = COALESCE($7, p.ac_workshop_amt),

  -- Multibrand Workshop (formerly wholesale)
  multibrand_workshop     = COALESCE($8, p.multibrand_workshop),
  multibrand_workshop_per = COALESCE($9, p.multibrand_workshop_per),
  multibrand_workshop_amt = COALESCE($10, p.multibrand_workshop_amt),

  -- Auto Trader (formerly mrp)
  auto_trader             = COALESCE($11, p.auto_trader),
  auto_trader_per         = COALESCE($12, p.auto_trader_per),
  auto_trader_amt         = COALESCE($13, p.auto_trader_amt),

  -- AC Trader
  ac_trader               = COALESCE($14, p.ac_trader),
  ac_trader_per           = COALESCE($15, p.ac_trader_per),
  ac_trader_amt           = COALESCE($16, p.ac_trader_amt),

  -- Outstation & notes
  outstation_class_a      = COALESCE($17, p.outstation_class_a),
  outstation_note         = COALESCE($18, p.outstation_note),

  -- MRPs & misc
  mrp_temp                = COALESCE($19, p.mrp_temp),
  oem_mrp                 = COALESCE($20, p.oem_mrp),
  unit_measure            = COALESCE($21, p.unit_measure),
  minimum_purchase_quantity = COALESCE($22, p.minimum_purchase_quantity),

  updated_at              = NOW()
FROM product_parts AS pp
WHERE pp.part_no = $23
  AND p.product_part_id = pp.id
RETURNING p.id, p.product_part_id, p.basic_price, p.freight, p.gst, p.tax, p.ac_workshop, p.ac_workshop_per, p.ac_workshop_amt, p.multibrand_workshop, p.multibrand_workshop_per, p.multibrand_workshop_amt, p.auto_trader, p.auto_trader_per, p.auto_trader_amt, p.ac_trader, p.ac_trader_per, p.ac_trader_amt, p.outstation_class_a, p.outstation_note, p.minimum_purchase_quantity, p.mrp_temp, p.oem_mrp, p.unit_measure, p.created_at, p.updated_at
`

type UpdateProductPriceByIDParams struct {
	NewBasicPrice              sql.NullFloat64
	NewFreight                 sql.NullFloat64
	NewGst                     sql.NullFloat64
	NewTax                     sql.NullFloat64
	NewAcWorkshop              sql.NullFloat64
	NewAcWorkshopPer           sql.NullFloat64
	NewAcWorkshopAmt           sql.NullFloat64
	NewMultibrandWorkshop      sql.NullFloat64
	NewMultibrandWorkshopPer   sql.NullFloat64
	NewMultibrandWorkshopAmt   sql.NullFloat64
	NewAutoTrader              sql.NullFloat64
	NewAutoTraderPer           sql.NullFloat64
	NewAutoTraderAmt           sql.NullFloat64
	NewAcTrader                sql.NullFloat64
	NewAcTraderPer             sql.NullFloat64
	NewAcTraderAmt             sql.NullFloat64
	NewOutstationClassA        sql.NullFloat64
	NewOutstationNote          sql.NullString
	NewMrpTemp                 sql.NullFloat64
	NewOemMrp                  sql.NullFloat64
	NewUnitMeasure             sql.NullString
	NewMinimumPurchaseQuantity sql.NullInt32
	PartNo                     string
}

func (q *Queries) UpdateProductPriceByID(ctx context.Context, arg UpdateProductPriceByIDParams) (ProductPartPricing, error) {
	row := q.db.QueryRowContext(ctx, updateProductPriceByID,
		arg.NewBasicPrice,
		arg.NewFreight,
		arg.NewGst,
		arg.NewTax,
		arg.NewAcWorkshop,
		arg.NewAcWorkshopPer,
		arg.NewAcWorkshopAmt,
		arg.NewMultibrandWorkshop,
		arg.NewMultibrandWorkshopPer,
		arg.NewMultibrandWorkshopAmt,
		arg.NewAutoTrader,
		arg.NewAutoTraderPer,
		arg.NewAutoTraderAmt,
		arg.NewAcTrader,
		arg.NewAcTraderPer,
		arg.NewAcTraderAmt,
		arg.NewOutstationClassA,
		arg.NewOutstationNote,
		arg.NewMrpTemp,
		arg.NewOemMrp,
		arg.NewUnitMeasure,
		arg.NewMinimumPurchaseQuantity,
		arg.PartNo,
	)
	var i ProductPartPricing
	err := row.Scan(
		&i.ID,
		&i.ProductPartID,
		&i.BasicPrice,
		&i.Freight,
		&i.Gst,
		&i.Tax,
		&i.AcWorkshop,
		&i.AcWorkshopPer,
		&i.AcWorkshopAmt,
		&i.MultibrandWorkshop,
		&i.MultibrandWorkshopPer,
		&i.MultibrandWorkshopAmt,
		&i.AutoTrader,
		&i.AutoTraderPer,
		&i.AutoTraderAmt,
		&i.AcTrader,
		&i.AcTraderPer,
		&i.AcTraderAmt,
		&i.OutstationClassA,
		&i.OutstationNote,
		&i.MinimumPurchaseQuantity,
		&i.MrpTemp,
		&i.OemMrp,
		&i.UnitMeasure,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const updateProductPriceByPartNo = `-- name: UpdateProductPriceByPartNo :one
UPDATE product_part_pricing AS p
SET
  basic_price             = COALESCE($1, p.basic_price),
  freight                 = COALESCE($2, p.freight),
  tax                     = COALESCE($3, p.tax),
  gst                     = COALESCE($4, p.gst),

  -- Ac Workshop (was retail)
  ac_workshop             = COALESCE($5, p.ac_workshop),
  ac_workshop_per         = COALESCE($6, p.ac_workshop_per),
  ac_workshop_amt         = COALESCE($7, p.ac_workshop_amt),

  -- Multibrand Workshop (was wholesale)
  multibrand_workshop     = COALESCE($8, p.multibrand_workshop),
  multibrand_workshop_per = COALESCE($9, p.multibrand_workshop_per),
  multibrand_workshop_amt = COALESCE($10, p.multibrand_workshop_amt),

  -- Auto Trader (was mrp)
  auto_trader             = COALESCE($11, p.auto_trader),
  auto_trader_per         = COALESCE($12, p.auto_trader_per),
  auto_trader_amt         = COALESCE($13, p.auto_trader_amt),

  -- AC Trader (formerly Outstation Class B)
  ac_trader               = COALESCE($14, p.ac_trader),
  ac_trader_per           = COALESCE($15, p.ac_trader_per),
  ac_trader_amt           = COALESCE($16, p.ac_trader_amt),

  -- Outstation
  outstation_class_a      = COALESCE($17, p.outstation_class_a),
  outstation_note         = COALESCE($18, p.outstation_note),

  -- MRPs and misc
  mrp_temp                = COALESCE($19, p.mrp_temp),
  oem_mrp                 = COALESCE($20, p.oem_mrp),
  unit_measure            = COALESCE($21, p.unit_measure),
  minimum_purchase_quantity = COALESCE($22, p.minimum_purchase_quantity),

  updated_at              = NOW()
FROM product_parts AS pp
WHERE pp.id = p.product_part_id
  AND pp.part_no = $23
RETURNING pp.id, company_id, model_id, brand_id, category_id, part_no, oem_no, is_active, pp.created_at, pp.updated_at, p.id, product_part_id, basic_price, freight, gst, tax, ac_workshop, ac_workshop_per, ac_workshop_amt, multibrand_workshop, multibrand_workshop_per, multibrand_workshop_amt, auto_trader, auto_trader_per, auto_trader_amt, ac_trader, ac_trader_per, ac_trader_amt, outstation_class_a, outstation_note, minimum_purchase_quantity, mrp_temp, oem_mrp, unit_measure, p.created_at, p.updated_at
`

type UpdateProductPriceByPartNoParams struct {
	NewBasicPrice              sql.NullFloat64
	NewFreight                 sql.NullFloat64
	NewTax                     sql.NullFloat64
	NewGst                     sql.NullFloat64
	NewAcWorkshop              sql.NullFloat64
	NewAcWorkshopPer           sql.NullFloat64
	NewAcWorkshopAmt           sql.NullFloat64
	NewMultibrandWorkshop      sql.NullFloat64
	NewMultibrandWorkshopPer   sql.NullFloat64
	NewMultibrandWorkshopAmt   sql.NullFloat64
	NewAutoTrader              sql.NullFloat64
	NewAutoTraderPer           sql.NullFloat64
	NewAutoTraderAmt           sql.NullFloat64
	NewAcTrader                sql.NullFloat64
	NewAcTraderPer             sql.NullFloat64
	NewAcTraderAmt             sql.NullFloat64
	NewOutstationClassA        sql.NullFloat64
	NewOutstationNote          sql.NullString
	NewMrpTemp                 sql.NullFloat64
	NewOemMrp                  sql.NullFloat64
	NewUnitMeasure             sql.NullString
	NewMinimumPurchaseQuantity sql.NullInt32
	PartNo                     string
}

type UpdateProductPriceByPartNoRow struct {
	ID                      uuid.UUID
	CompanyID               uuid.UUID
	ModelID                 uuid.UUID
	BrandID                 uuid.UUID
	CategoryID              uuid.UUID
	PartNo                  string
	OemNo                   sql.NullString
	IsActive                sql.NullBool
	CreatedAt               time.Time
	UpdatedAt               time.Time
	ID_2                    uuid.UUID
	ProductPartID           uuid.UUID
	BasicPrice              float64
	Freight                 float64
	Gst                     float64
	Tax                     float64
	AcWorkshop              float64
	AcWorkshopPer           float64
	AcWorkshopAmt           float64
	MultibrandWorkshop      float64
	MultibrandWorkshopPer   float64
	MultibrandWorkshopAmt   float64
	AutoTrader              float64
	AutoTraderPer           float64
	AutoTraderAmt           float64
	AcTrader                float64
	AcTraderPer             float64
	AcTraderAmt             float64
	OutstationClassA        float64
	OutstationNote          sql.NullString
	MinimumPurchaseQuantity int32
	MrpTemp                 float64
	OemMrp                  float64
	UnitMeasure             sql.NullString
	CreatedAt_2             time.Time
	UpdatedAt_2             time.Time
}

func (q *Queries) UpdateProductPriceByPartNo(ctx context.Context, arg UpdateProductPriceByPartNoParams) (UpdateProductPriceByPartNoRow, error) {
	row := q.db.QueryRowContext(ctx, updateProductPriceByPartNo,
		arg.NewBasicPrice,
		arg.NewFreight,
		arg.NewTax,
		arg.NewGst,
		arg.NewAcWorkshop,
		arg.NewAcWorkshopPer,
		arg.NewAcWorkshopAmt,
		arg.NewMultibrandWorkshop,
		arg.NewMultibrandWorkshopPer,
		arg.NewMultibrandWorkshopAmt,
		arg.NewAutoTrader,
		arg.NewAutoTraderPer,
		arg.NewAutoTraderAmt,
		arg.NewAcTrader,
		arg.NewAcTraderPer,
		arg.NewAcTraderAmt,
		arg.NewOutstationClassA,
		arg.NewOutstationNote,
		arg.NewMrpTemp,
		arg.NewOemMrp,
		arg.NewUnitMeasure,
		arg.NewMinimumPurchaseQuantity,
		arg.PartNo,
	)
	var i UpdateProductPriceByPartNoRow
	err := row.Scan(
		&i.ID,
		&i.CompanyID,
		&i.ModelID,
		&i.BrandID,
		&i.CategoryID,
		&i.PartNo,
		&i.OemNo,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.ID_2,
		&i.ProductPartID,
		&i.BasicPrice,
		&i.Freight,
		&i.Gst,
		&i.Tax,
		&i.AcWorkshop,
		&i.AcWorkshopPer,
		&i.AcWorkshopAmt,
		&i.MultibrandWorkshop,
		&i.MultibrandWorkshopPer,
		&i.MultibrandWorkshopAmt,
		&i.AutoTrader,
		&i.AutoTraderPer,
		&i.AutoTraderAmt,
		&i.AcTrader,
		&i.AcTraderPer,
		&i.AcTraderAmt,
		&i.OutstationClassA,
		&i.OutstationNote,
		&i.MinimumPurchaseQuantity,
		&i.MrpTemp,
		&i.OemMrp,
		&i.UnitMeasure,
		&i.CreatedAt_2,
		&i.UpdatedAt_2,
	)
	return i, err
}

const updateProductPriceByProductPartID = `-- name: UpdateProductPriceByProductPartID :one
UPDATE product_part_pricing AS p
SET
  basic_price             = COALESCE($2, p.basic_price),
  freight                 = COALESCE($3, p.freight),
  tax                     = COALESCE($4, p.tax),
  gst                     = COALESCE($5, p.gst),

  -- Ac Workshop (was retail)
  ac_workshop             = COALESCE($6, p.ac_workshop),
  ac_workshop_per         = COALESCE($7, p.ac_workshop_per),
  ac_workshop_amt         = COALESCE($8, p.ac_workshop_amt),

  -- Multibrand Workshop (was wholesale)
  multibrand_workshop     = COALESCE($9, p.multibrand_workshop),
  multibrand_workshop_per = COALESCE($10, p.multibrand_workshop_per),
  multibrand_workshop_amt = COALESCE($11, p.multibrand_workshop_amt),

  -- Auto Trader (was mrp)
  auto_trader             = COALESCE($12, p.auto_trader),
  auto_trader_per         = COALESCE($13, p.auto_trader_per),
  auto_trader_amt         = COALESCE($14, p.auto_trader_amt),

  -- AC Trader
  ac_trader               = COALESCE($15, p.ac_trader),
  ac_trader_per           = COALESCE($16, p.ac_trader_per),
  ac_trader_amt           = COALESCE($17, p.ac_trader_amt),

  -- Outstation
  outstation_class_a      = COALESCE($18, p.outstation_class_a),
  outstation_note         = COALESCE($19, p.outstation_note),

  -- MRPs & misc
  mrp_temp                = COALESCE($20, p.mrp_temp),
  oem_mrp                 = COALESCE($21, p.oem_mrp),
  unit_measure            = COALESCE($22, p.unit_measure),
  minimum_purchase_quantity = COALESCE($23, p.minimum_purchase_quantity),


  updated_at              = NOW()
WHERE p.product_part_id = $1
RETURNING id, product_part_id, basic_price, freight, gst, tax, ac_workshop, ac_workshop_per, ac_workshop_amt, multibrand_workshop, multibrand_workshop_per, multibrand_workshop_amt, auto_trader, auto_trader_per, auto_trader_amt, ac_trader, ac_trader_per, ac_trader_amt, outstation_class_a, outstation_note, minimum_purchase_quantity, mrp_temp, oem_mrp, unit_measure, created_at, updated_at
`

type UpdateProductPriceByProductPartIDParams struct {
	ProductPartID              uuid.UUID
	NewBasicPrice              sql.NullFloat64
	NewFreight                 sql.NullFloat64
	NewTax                     sql.NullFloat64
	NewGst                     sql.NullFloat64
	NewAcWorkshop              sql.NullFloat64
	NewAcWorkshopPer           sql.NullFloat64
	NewAcWorkshopAmt           sql.NullFloat64
	NewMultibrandWorkshop      sql.NullFloat64
	NewMultibrandWorkshopPer   sql.NullFloat64
	NewMultibrandWorkshopAmt   sql.NullFloat64
	NewAutoTrader              sql.NullFloat64
	NewAutoTraderPer           sql.NullFloat64
	NewAutoTraderAmt           sql.NullFloat64
	NewAcTrader                sql.NullFloat64
	NewAcTraderPer             sql.NullFloat64
	NewAcTraderAmt             sql.NullFloat64
	NewOutstationClassA        sql.NullFloat64
	NewOutstationNote          sql.NullString
	NewMrpTemp                 sql.NullFloat64
	NewOemMrp                  sql.NullFloat64
	NewUnitMeasure             sql.NullString
	NewMinimumPurchaseQuantity sql.NullInt32
}

func (q *Queries) UpdateProductPriceByProductPartID(ctx context.Context, arg UpdateProductPriceByProductPartIDParams) (ProductPartPricing, error) {
	row := q.db.QueryRowContext(ctx, updateProductPriceByProductPartID,
		arg.ProductPartID,
		arg.NewBasicPrice,
		arg.NewFreight,
		arg.NewTax,
		arg.NewGst,
		arg.NewAcWorkshop,
		arg.NewAcWorkshopPer,
		arg.NewAcWorkshopAmt,
		arg.NewMultibrandWorkshop,
		arg.NewMultibrandWorkshopPer,
		arg.NewMultibrandWorkshopAmt,
		arg.NewAutoTrader,
		arg.NewAutoTraderPer,
		arg.NewAutoTraderAmt,
		arg.NewAcTrader,
		arg.NewAcTraderPer,
		arg.NewAcTraderAmt,
		arg.NewOutstationClassA,
		arg.NewOutstationNote,
		arg.NewMrpTemp,
		arg.NewOemMrp,
		arg.NewUnitMeasure,
		arg.NewMinimumPurchaseQuantity,
	)
	var i ProductPartPricing
	err := row.Scan(
		&i.ID,
		&i.ProductPartID,
		&i.BasicPrice,
		&i.Freight,
		&i.Gst,
		&i.Tax,
		&i.AcWorkshop,
		&i.AcWorkshopPer,
		&i.AcWorkshopAmt,
		&i.MultibrandWorkshop,
		&i.MultibrandWorkshopPer,
		&i.MultibrandWorkshopAmt,
		&i.AutoTrader,
		&i.AutoTraderPer,
		&i.AutoTraderAmt,
		&i.AcTrader,
		&i.AcTraderPer,
		&i.AcTraderAmt,
		&i.OutstationClassA,
		&i.OutstationNote,
		&i.MinimumPurchaseQuantity,
		&i.MrpTemp,
		&i.OemMrp,
		&i.UnitMeasure,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
